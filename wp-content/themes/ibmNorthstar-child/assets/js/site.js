/*! Last edited: 2016-09-22 */
 /* DO NOT EDIT THIS FILE DIRECTLY */

window.newshub = (function(app, $){

	/*-----------------------------------------------------
	*  this part populates window.newshub.data.articles with article data for overlay approach for showing contents.
	*/

	app.data = app.data || {};
	app.data.animatedArticles = app.data.animatedArticles || {};

	/*-----------------------------------------------------
	*  let's start staggered animation if it hasn't been animated
	*/
	
	app.functions = app.functions || {};
	app.functions.renderCard = function(postID){

		// get the elements and set up variables
		var
			$el = $('[data-post-id='+postID+']'),
			$cardEl = $el.find('.nh-card')
			delay = Math.max((parseInt($el.attr('data-post-count')) - Object.keys(window.newshub.data.animatedArticles).length), 0) * 100 + 300
		;

		// ignore the cascading fade and randomize it
		delay = Math.random() * 800 + 300;

		// if this card hasn't been animated...
		if(app.data.animatedArticles[postID] !== true){

			// register this card
			app.data.animatedArticles[postID] = true;

			// start the animation
			setTimeout(function(){
				$el.find('.nh-card')
					.addClass('start-animation')
				;
			}, delay);

		}else{
			// this card has been animated - so let's not animate
			setTimeout(function(){
				$el.find('.nh-card')
					.addClass('donot-animate')
					.addClass('start-animation')
				;
			}, delay);

		}

		$el.find('.nh-transition-triggerer').each(function(i, el){

			var
				$triggerer = $(el)
			;

			$triggerer.click(function(e){
				e.preventDefault();

				$cardEl.addClass('opened').addClass('bring-to-front');

				var $contentOverlay = $('<div class="nh-content-overlay"></div>');

				$('#ibm-content-body').append($contentOverlay);

				setTimeout(function(){
					$contentOverlay.addClass('show-up');
				},20);

				// var articleData = app.data.articles[$el.attr('data-post-id')];

				setTimeout(function(){

					var clickThroughTestCase = getURLParameter('transition_option_case');
					clickThroughTestCase = '1';
					if(clickThroughTestCase === '1'){

					//-----------------------------------------------------
					//  open the link
					window.location.href = $triggerer.attr('href');

					}else{
						//-----------------------------------------------------
						//  open an overlay
						$('#story-space-2').append('<div class="nh-content-overlay"><h2 class="title">'+unescape(articleData.title)+'</h2><div class="content-wrap">'+unescape(articleData.content)+'</div><div class="close-button">close</div></div>');

						$('#story-space-2').find('.nh-content-overlay > .close-button').click(function(e){
							$cardEl.removeClass('opened');
							$('#story-space-2').find('.nh-content-overlay > .close-button').unbind('click');
							$('#story-space-2').find('.nh-content-overlay').fadeOut(500, function(){
								$cardEl.removeClass('bring-to-front');
								$('#story-space-2').find('.nh-content-overlay').remove();
							});
						});

						$('#story-space-2').find('.nh-content-overlay').fadeIn(200);
					}

				}, 200);

			});

		}); // end of .nh-transition-triggerer .each...

	} // end of renderCard()

	return app;
})(window.newshub || {}, jQuery);

jQuery(function(){

  window.newshub = (function(app, $, cookieManager){
    console.log('NH_subscriptionBar.js:app===', app);

    app.subscriptionBar = (function(module, $, cookieManager){

      var 
        $theBar = $('#nh-social-bar'),
        $theChevron = $theBar.find('.minimized-cta'),
        $theForm = $theBar.find('.nh-subscribe-form'),
        $theCloseButton = $theBar.find('.ibm-close-link'),
        COOKIE_NAME = 'ibm-digital-marketing-hub-subscriptionbar',
        lSource = getURLParameter('sp_lsource')
      ;

      // window resize
      function onWindowResize(e){
        // console.log('onWindowResize...');

        if(
          $theBar.is('.user-touched') !== true
          && $('body').is('.home') === true
          && cookieManager.get(COOKIE_NAME) == null
        ){
          if($(window).width() < 500){
            $theChevron.fadeIn();
            $theBar.addClass('minimized');
          }else{
            $theChevron.fadeOut();
            $theBar.removeClass('minimized');
          }
        }
      }

      module.showState = function(state){
        var $widgetContainerWrapper = $theForm;

        switch(state){

          case 'loading':{
            // $widgetContainerWrapper.find('.nh-loading').fadeIn();
            $widgetContainerWrapper.removeClass('nh-wpsp-display-error').removeClass('nh-wpsp-display-success').addClass('nh-wpsp-display-loading').trigger('NH_WPSP_DISPLAY_LOADING');
            
            break;
          }

          case 'success':{
            // $widgetContainerWrapper.find('.nh-loading').fadeOut();
            // $widgetContainerWrapper.find(".nh-content-original").addClass('nh-content-original-hide');
            // $widgetContainerWrapper.find(".nh-content-success").removeClass('nh-content-success-hide').addClass('nh-content-success-display');
            // console.log($widgetContainerWrapper.find(".nh-content-original"));            
            $widgetContainerWrapper.removeClass('nh-wpsp-display-error').removeClass('nh-wpsp-display-loading').addClass('nh-wpsp-display-success').trigger('NH_WPSP_DISPLAY_SUCCESS');

            setTimeout(function(){
              // $('#nh-social-bar').removeClass('nh-social-bar-open');
              // $('#nh-social-bar .nh-subscribe-form').slideUp();
              module.minimize(true);
            },5000);
            
            break;
          }

          case 'error':{
            // $widgetContainerWrapper.find('.nh-loading').fadeOut();
            $widgetContainerWrapper.removeClass('nh-wpsp-display-loading').removeClass('nh-wpsp-display-success').addClass('nh-wpsp-display-error').trigger('NH_WPSP_DISPLAY_ERROR');
            // $("#story-space-2[data-widget='masonry']").masonry("reloadItems");
            //   $("#story-space-2[data-widget='masonry']").imagesLoaded(function(){
            //       $("#story-space-2[data-widget='masonry']").masonry();
            //   });
            break;
          }
        }
      }

      module.minimize = function(userMinimized){
        module.closeForm();
        $theBar.addClass(userMinimized === true ? 'user-minimized' : '').addClass('minimized');
        $theChevron.fadeIn();
        $('body').removeClass('sp_lsource-email');
        $('#nh-social-bar-overlay-bg').fadeOut(400);
      }

      module.unminimize = function(){
        $theBar.removeClass('user-minimized').removeClass('minimized');
        $theChevron.fadeOut();
      }

      module.toggleForm = function(userTouched){
        // console.log('toggleForm...', $theForm);
        var isItOpen = $theBar.hasClass('nh-social-bar-open') === true;
        if(isItOpen === true){
          
          module.minimize(userTouched);
          module.closeForm();
          
        }else{

          module.unminimize();
          module.openForm();

        }
        $theForm.removeClass('nh-wpsp-display-error').removeClass('nh-wpsp-display-success').removeClass('nh-wpsp-display-loading');
        
        
      }

      module.closeForm = function(){
        $theBar.removeClass('nh-social-bar-open');
        $theForm.slideUp( $('body').hasClass('sp_lsource-email') === true ? 400 : 100 );
      }

      module.openForm = function(){
        $theBar.addClass('nh-social-bar-open');
        $theForm.slideDown( $('body').hasClass('sp_lsource-email') === true ? 400 : 100 );
      }

      module.userTouched = function(userTouched){
        $theBar.addClass('user-touched');
        cookieManager.set(COOKIE_NAME, userTouched, {
          'expires':0.1
        });
      }

      module.init = function(){
        // console.log('subscriptionBar.init...');

        // close button
        $theCloseButton.click(function(e){
          e.preventDefault();
          module.userTouched('closed');
          module.minimize(true);
        });

        // subscribe
        $('#nh-social-bar .subscribe').click(function(e){
          e.preventDefault();
          module.toggleForm(true);
        });

        // the chevron in the minimized state
        $theChevron.click(function(e){
          e.preventDefault();
          module.userTouched('open');
          module.unminimize();
        });

        onWindowResize();
        $(window).resize(onWindowResize);

        if(
          $('body').is('.home') !== true
          || cookieManager.get(COOKIE_NAME) === 'closed'
          && lSource !== 'email'
        ){
          module.minimize(true);
        }

        if(lSource === 'email'){
          // console.log('email source!!!');
          $('#nh-social-bar-overlay-bg').fadeIn();
          $('body').addClass('sp_lsource-email');
          // $('#nh-social-bar-overlay-bg').addClass('sp_source-email');
          module.toggleForm();
        }else{
          // console.log('email source no!');
          $('#nh-social-bar-overlay-bg').hide();
        }
      }

      return module;
    })(app.subscriptionBar || {}, $, cookieManager);

    return app;
  })(window.newshub || {}, jQuery, window.Cookies);
});


// (function (window,$) {


    
//     // --------------------------------------------
//     // Responsive IFRAMEs

//     var initResponsiveFrames = function() {

//         var container   = $('.ibm-blog__article-content');
//         var frames      = container.find('IFRAME'); 


//         // ---

//         var onResize = function() {
//             frames.each(setSize);
//         };

//         var setSize = function() {

//             var width = container.width();
//             var height = width * $(this).data('ratio');

//             $(this).width(width);
//             $(this).height(height);

//         };

//         var setRatio = function() {

//             // Requires explicit width and height
//             if (!$(this).attr('width') || !$(this).attr('height')) return false;

//             var ratio = ($(this).attr('height') / $(this).attr('width')).toPrecision(4);

//             $(this).data('ratio', ratio);

//         };

//         var init = function() {

//             // Store the ratio, this is used to calculate future size
//             frames.each(setRatio);

//             $(window).resize(onResize).trigger('resize');

//         };


//         // ---

//         init();

//     };


//     // --------------------------------------------
//     // Social Sharing Icons

//     var initSocialSharing = function() {

//         var share_buttons = $(".share_buttons");

//         // Trickery to get Firefox to open this in a popup window
//         // https://github.com/tabalinas/jssocials/issues/16
//         window.openShareWindow = function(url) {
//             window.open(url, 'Sharing', 'menubar=no,width=500,height=500');
//         };

//         share_buttons.jsSocials({
//             _getShareUrl: function() {
//                 var url = jsSocials.Socials.prototype._getShareUrl.apply(this, arguments);
//                 return "javascript:window.openShareWindow('" + url + "');";
//             },
//             showLabel: false,
//             showCount: false, 
//             shares: ["twitter", "facebook", "googleplus", "email"]
//         });

//         // Make sure the actual button doesn't have a blank target.
//         share_buttons.find("a").removeAttr("target");

//     };

//     // --------------------------------------------
//     // Header Fading logo

//      var initHeaderCycle = function() {

//         var fader       = $('.ibm-blog__header-logo .slides');
//         var slides      = fader.find('DIV');
//         var current     = 0;
//         var count       = (slides.length - 1);
//         var speed       = 5000;

//         // ---

//         var startCycle   = function() {

//             var next_position   = (current == count) ? 0 : (current+1);
//             var next_slide      = slides.eq(next_position);

//             current = next_position;

//             $(next_slide)
//                 .css({'opacity': 0})
//                 .addClass('incoming')
//                 .animate({opacity: 1}, speed, finishCycle);

//         };

//         var finishCycle   = function() {

//             slides.removeClass('current');
//             slides.removeClass('incoming');
//             $(this).addClass('current');

//             startCycle();

//         };

//         // ---

//         startCycle();

//     };

//     var initResponsiveImages = function(){
//         var $lead_image = $('#ibm-leadspace-head'),
//             $featured_image = $('.ibm-blog__featured .ibm-home-featured-top'),
//             article_lead_images = $('.post-leadspace .w-image'),
//             grid_images = $('.post .ibm-blog__postgrid-item-top');

//         var winW = $(window).width();
//         window.devicePixelRatio = window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI;

//         var updateImage = function($image){
//             //console.log(winW,window.devicePixelRatio);

//             // retina
//             if (typeof window.devicePixelRatio !== "undefined" && window.devicePixelRatio > 1) {
//                 if (winW >= 1200) { 
//                     // 2880
//                     $image.css('background-image','url('+$image.attr('data-desktop-lg-retina')+')');
//                 } else if (winW >= 780 && winW <= 1199) {
//                     // 2400
//                     $image.css('background-image','url('+$image.attr('data-desktop-retina')+')');
//                 } else if (winW >= 380 && winW <= 780) {
//                     // 1200
//                     $image.css('background-image','url('+$image.attr('data-tablet-retina')+')');
//                 } else if (winW <= 379) {
//                     // 780
//                     $image.css('background-image','url('+$image.attr('data-mobile-retina')+')');
//                 }
//             }
//             // non retina
//             else {
//                 if (winW >= 1200) { 
//                     // 1440
//                     $image.css('background-image','url('+$image.attr('data-desktop-lg')+')');
//                 } else if (winW >= 780 && winW <= 1199) {
//                     // 1200
//                     $image.css('background-image','url('+$image.attr('data-desktop')+')');
//                 } else if (winW >= 380 && winW <= 780) {
//                     // 780
//                     $image.css('background-image','url('+$image.attr('data-tablet')+')');
//                 } else if (winW <= 379) {
//                     // 380
//                     $image.css('background-image','url('+$image.attr('data-mobile')+')');
//                 }
//             }
//         }
        


//         $(window).on('resize', function(){
//             winW = $(window).width();
//             updateImage($lead_image);
//             updateImage($featured_image);
            
//             $.each(article_lead_images, function(ai,aimage){
//                 updateImage($(aimage));
//             });
//             $.each(grid_images, function(gi,gimage){
//                 updateImage($(gimage));
//             });
//         });

//         updateImage($lead_image);
//         updateImage($featured_image);

//         $.each(article_lead_images, function(ai,aimage){
//             updateImage($(aimage));
//         });
//         $.each(grid_images, function(gi,gimage){
//             updateImage($(gimage));
//         });

//         // update grid images on load more
//         window.loadGridImages = function(){
//             grid_images = $('.post .ibm-blog__postgrid-item-top');
//             $.each(grid_images, function(gi,gimage){
//                 updateImage($(gimage));
//             });
//         };
        
//     };


//     // --------------------------------------------
//     // Init

//     jQuery(document).ready(function($) {

//         initHeaderCycle();
//         initResponsiveFrames();
//         initResponsiveImages();
//         //initSocialSharing();


//     });

// })(window,jQuery);

function getURLParameter(name) {
  return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [ , "" ])[1] .replace(/\+/g, '%20')) || null;
};

// if there is facetwp parameter, clear it.
var paged = parseInt(getURLParameter('fwp_paged'));
if( isNaN(paged) !== true && window.newshub.urlReset !== true){
	window.newshub.urlReset = true;
	// window.location.href = window.location.href.replace('fwp_paged', '');
	var params = window.location.search.substring(1).split('&');
	var newSearch = '?';
	params.forEach(function(param, i){
		var n = param.split('=');
		if(n[0] === 'fwp_paged'){
			params[i] = '';

		}
		newSearch = newSearch + params[i] +'&';
	});
	window.location.href = window.location.href.replace(window.location.search, newSearch);
}

/*-----------------------------------------------------
 *	browser detection
 */
var browserDetection = (function(obj){
	
	//SETS FUNCTION TO DETECT IE6, IE7 and IE8
	obj.isIE = function(upToVersion){
		var ret = false;
		upToVersion = upToVersion || 9;
		for(var version = 6;version<=upToVersion;version++){
			if(navigator.appVersion.indexOf("MSIE "+version+".") >= 0) ret = true;
		}
		return ret;
	};

	//SETS FUNCTION TO DETECT IE6
	obj.isIE6 = function(){
		return obj.isIE(6);
	};

	//SETS FUNCTION TO DETECT IE7
	obj.isIE7 = function(){
		return obj.isIE(7);
	};

	//SETS FUNCTION TO DETECT IE8
	obj.isIE8 = function(){
		return obj.isIE(8);
	};
	
	//SETS FUNCTION TO DETECT IE9
	obj.isIE9 = function(){
		return obj.isIE(9);
	};

	obj.isSafari = function(){
		return (navigator.appVersion.indexOf("Safari") >= 0) && obj.isChrome() != true;
	};

	obj.isChrome = function(){
		return (navigator.appVersion.indexOf("Chrome") >= 0);
	};

	obj.isWebkit = function(){
		return (navigator.appVersion.indexOf("WebKit") >= 0);
	};
	
	obj.isIpad = function(){
		return (navigator.userAgent.match(/iPad/i) != null);
	};

	obj.isIphone = function(){
		return (navigator.userAgent.match(/iPhone/i) != null);
	};

	obj.isAndroid = function(){
		return (navigator.userAgent.toLowerCase().match(/android/i) != null);
	};
	
	obj.isBlackBerry = function(){
		return navigator.userAgent.match(/BlackBerry/i);
	};
	
	obj.isOperaMini = function(){
		return navigator.userAgent.match(/Opera Mini/i);
	};
	
	obj.isWindowsMobile = function(){
		return navigator.userAgent.match(/IEMobile/i);
	};
	
	obj.isMobilePhone = function(){
		return obj.isIpad()==true || obj.isIphone()==true || obj.isAndroid()==true || obj.isBlackBerry()==true || obj.isOperaMini()==true || obj.isWindowsMobile()==true;
	};
	
	obj.isMobile = function(){
		return obj.isWindowsMobile()==true || obj.isIpad()==true;
	};
	
	obj.isIos = function(){
		return obj.isIphone()==true && obj.isIpad()==true;
	}
	obj.isWorklight = function(){
		return (/(worklight)/).test(navigator.userAgent.toLowerCase());
	}
	obj.isFirefox = function(){
		return navigator.userAgent.toLowerCase().indexOf('firefox')>=0;
	}

	obj.getBrowserString = function(){
		var ret;
		if(obj.isFirefox()==true){
			ret = 'firefox';
		}else if(obj.isChrome()==true){
			ret = 'chrome';
		}else if(obj.isSafari()==true){
			ret = 'safari';
		}else{
			ret = 'other'
		}
		return ret;
	}

	obj.getAppVersion =  function() {
		if (typeof appVer !== 'undefined') return appVer;
	}
	obj.requireAppVersion =  function(required) {
		// returns true if the app version is >= the passed required version
		// best practice to use in conjunction with isWorklight() to make sure you are on the app
		// returns false if the app version is older than required
		// example: required = '2.0.1' -- if required <= getAppVersion return true otherwise false
		var requiredVersion = required.split('.');
		var thisVersion = this.getAppVersion();
		if (!thisVersion) return false; // fail if no global
		thisVersion = thisVersion.split('.');
		// NOTE this logic won't work perfectly across major version numbers, but is ok for minor & patch comparisons
		for (var i = 0; i < thisVersion.length; i++) {
			debug.log('v check:', thisVersion[i], requiredVersion[i], thisVersion[i] < requiredVersion[i]);
			if (thisVersion[i] < requiredVersion[i]) return false; // fail on any part of the version
		}
		return true;
	}

	obj.constants = {
		MOBILE:'mobile',
		DESKTOP:'desktop',
		ALL_PLATFORMS:'*'
	}
	obj.getPlatform = function(){return (typeof(bowser.mobile)!=='undefined' || typeof(bowser.tablet)!=='undefined') ? obj.constants.MOBILE : obj.constants.DESKTOP; }
	
	return obj;
})(browserDetection || {});

//-----------------------------------------------------
//	let's start the show
(function(window, $){

	$(function(){
		console.log('\n\n\n\t\t\t     O O\n\t\t\t   . --- .\n\t\t\t  /| --- |\\\n\t\t\t (_) --- (_)\n\t\t\t      -\n\n\n*********************************************\n\n\tWelcome to IBM Digital Marketing Hub.\n\n*********************************************\n\n\n.');

		$('body').addClass('nh-platform-'+(browserDetection.getPlatform()||'desktop'));

		window.newshub = window.newshub || {};
		window.newshub.$ = $;

		//-----------------------------------------------------
		//	 let's add beta!
		var $beta = $('<span class="beta-designator" style="font-size:0.85em;color:#00B4A0;font-weight:normal;font-family:HelvBoldIBM;margin-left:0.5em;display:none;">BETA</span>');
		$("header .ibm-sitenav-menu-name a").append($beta);
		setTimeout(function(){
			$("header .ibm-sitenav-menu-name a .beta-designator").fadeIn(1000);
		}, 500);

	});
})(window, jQuery);

/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2015
 */
!function(e,t){typeof module!="undefined"&&module.exports?module.exports=t():typeof define=="function"&&define.amd?define(e,t):this[e]=t()}("bowser",function(){function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function r(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var i=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(t),o=!s&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),a=!u&&/nexus\s*[0-9]+/i.test(t),f=/CrOS/.test(t),l=/silk/i.test(t),c=/sailfish/i.test(t),h=/tizen/i.test(t),p=/(web|hpw)os/i.test(t),d=/windows phone/i.test(t),v=/SamsungBrowser/i.test(t),m=!d&&/windows/i.test(t),g=!i&&!l&&/macintosh/i.test(t),y=!o&&!c&&!h&&!p&&/linux/i.test(t),b=n(/edge\/(\d+(\.\d+)?)/i),w=n(/version\/(\d+(\.\d+)?)/i),E=/tablet/i.test(t),S=!E&&/[^-]mobi/i.test(t),x=/xbox/i.test(t),T;/opera|opr|opios/i.test(t)?T={name:"Opera",opera:e,version:w||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/SamsungBrowser/i.test(t)?T={name:"Samsung Internet for Android",samsungBrowser:e,version:w||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(t)?T={name:"Opera Coast",coast:e,version:w||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?T={name:"Yandex Browser",yandexbrowser:e,version:w||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?T={name:"UC Browser",ucbrowser:e,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?T={name:"Maxthon",maxthon:e,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?T={name:"Epiphany",epiphany:e,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?T={name:"Puffin",puffin:e,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?T={name:"Sleipnir",sleipnir:e,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?T={name:"K-Meleon",kMeleon:e,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:d?(T={name:"Windows Phone",windowsphone:e},b?(T.msedge=e,T.version=b):(T.msie=e,T.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?T={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:f?T={name:"Chrome",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?T={name:"Microsoft Edge",msedge:e,version:b}:/vivaldi/i.test(t)?T={name:"Vivaldi",vivaldi:e,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||w}:c?T={name:"Sailfish",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?T={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(T={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(T.firefoxos=e)):l?T={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?T={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?T={name:"SlimerJS",slimer:e,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?T={name:"BlackBerry",blackberry:e,version:w||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(T={name:"WebOS",webos:e,version:w||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(T.touchpad=e)):/bada/i.test(t)?T={name:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:h?T={name:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/qupzilla/i.test(t)?T={name:"QupZilla",qupzilla:e,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||w}:/chromium/i.test(t)?T={name:"Chromium",chromium:e,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||w}:/chrome|crios|crmo/i.test(t)?T={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?T={name:"Android",version:w}:/safari|applewebkit/i.test(t)?(T={name:"Safari",safari:e},w&&(T.version=w)):i?(T={name:i=="iphone"?"iPhone":i=="ipad"?"iPad":"iPod"},w&&(T.version=w)):/googlebot/i.test(t)?T={name:"Googlebot",googlebot:e,version:n(/googlebot\/(\d+(\.\d+))/i)||w}:T={name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!T.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(T.name=T.name||"Blink",T.blink=e):(T.name=T.name||"Webkit",T.webkit=e),!T.version&&w&&(T.version=w)):!T.opera&&/gecko\//i.test(t)&&(T.name=T.name||"Gecko",T.gecko=e,T.version=T.version||n(/gecko\/(\d+(\.\d+)?)/i)),!T.msedge&&(o||T.silk)?T.android=e:i?(T[i]=e,T.ios=e):g?T.mac=e:x?T.xbox=e:m?T.windows=e:y&&(T.linux=e);var N="";T.windowsphone?N=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i?(N=n(/os (\d+([_\s]\d+)*) like mac os x/i),N=N.replace(/[_\s]/g,".")):o?N=n(/android[ \/-](\d+(\.\d+)*)/i):T.webos?N=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):T.blackberry?N=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):T.bada?N=n(/bada\/(\d+(\.\d+)*)/i):T.tizen&&(N=n(/tizen[\/\s](\d+(\.\d+)*)/i)),N&&(T.osversion=N);var C=N.split(".")[0];if(E||a||i=="ipad"||o&&(C==3||C>=4&&!S)||T.silk)T.tablet=e;else if(S||i=="iphone"||i=="ipod"||o||u||T.blackberry||T.webos||T.bada)T.mobile=e;return T.msedge||T.msie&&T.version>=10||T.yandexbrowser&&T.version>=15||T.vivaldi&&T.version>=1||T.chrome&&T.version>=20||T.samsungBrowser&&T.version>=4||T.firefox&&T.version>=20||T.safari&&T.version>=6||T.opera&&T.version>=10||T.ios&&T.osversion&&T.osversion.split(".")[0]>=6||T.blackberry&&T.version>=10.1||T.chromium&&T.version>=20?T.a=e:T.msie&&T.version<10||T.chrome&&T.version<20||T.firefox&&T.version<20||T.safari&&T.version<6||T.opera&&T.version<10||T.ios&&T.osversion&&T.osversion.split(".")[0]<6||T.chromium&&T.version<20?T.c=e:T.x=e,T}function r(e){return e.split(".").length}function i(e,t){var n=[],r;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function s(e){var t=Math.max(r(e[0]),r(e[1])),n=i(e,function(e){var n=t-r(e);return e+=(new Array(n+1)).join(".0"),i(e.split("."),function(e){return(new Array(20-e.length)).join("0")+e}).reverse()});while(--t>=0){if(n[0][t]>n[1][t])return 1;if(n[0][t]!==n[1][t])return-1;if(t===0)return 0}}function o(e,r,i){var o=n;typeof r=="string"&&(i=r,r=void 0),r===void 0&&(r=!1),i&&(o=t(i));var u=""+o.version;for(var a in e)if(e.hasOwnProperty(a)&&o[a])return s([u,e[a]])<0;return r}function u(e,t,n){return!o(e,t,n)}var e=!0,n=t(typeof navigator!="undefined"?navigator.userAgent||"":"");return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if(typeof r=="string"&&r in n)return!0}return!1},n.isUnsupportedBrowser=o,n.compareVersions=s,n.check=u,n._detect=t,n})

//-----------------------------------------------------
//  so that we can get url param to show different behaviors
function getURLParameter(name) {
	return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [ , "" ])[1] .replace(/\+/g, '%20')) || null;
};

/*!
 * JavaScript Cookie v2.1.3
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
;(function (factory) {
	var registeredInModuleLoader = false;
	if (typeof define === 'function' && define.amd) {
		define(factory);
		registeredInModuleLoader = true;
	}
	if (typeof exports === 'object') {
		module.exports = factory();
		registeredInModuleLoader = true;
	}
	if (!registeredInModuleLoader) {
		var OldCookies = window.Cookies;
		var api = window.Cookies = factory();
		api.noConflict = function () {
			window.Cookies = OldCookies;
			return api;
		};
	}
}(function () {
	function extend () {
		var i = 0;
		var result = {};
		for (; i < arguments.length; i++) {
			var attributes = arguments[ i ];
			for (var key in attributes) {
				result[key] = attributes[key];
			}
		}
		return result;
	}

	function init (converter) {
		function api (key, value, attributes) {
			var result;
			if (typeof document === 'undefined') {
				return;
			}

			// Write

			if (arguments.length > 1) {
				attributes = extend({
					path: '/'
				}, api.defaults, attributes);

				if (typeof attributes.expires === 'number') {
					var expires = new Date();
					expires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);
					attributes.expires = expires;
				}

				try {
					result = JSON.stringify(value);
					if (/^[\{\[]/.test(result)) {
						value = result;
					}
				} catch (e) {}

				if (!converter.write) {
					value = encodeURIComponent(String(value))
						.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);
				} else {
					value = converter.write(value, key);
				}

				key = encodeURIComponent(String(key));
				key = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);
				key = key.replace(/[\(\)]/g, escape);

				return (document.cookie = [
					key, '=', value,
					attributes.expires ? '; expires=' + attributes.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
					attributes.path ? '; path=' + attributes.path : '',
					attributes.domain ? '; domain=' + attributes.domain : '',
					attributes.secure ? '; secure' : ''
				].join(''));
			}

			// Read

			if (!key) {
				result = {};
			}

			// To prevent the for loop in the first place assign an empty array
			// in case there are no cookies at all. Also prevents odd result when
			// calling "get()"
			var cookies = document.cookie ? document.cookie.split('; ') : [];
			var rdecode = /(%[0-9A-Z]{2})+/g;
			var i = 0;

			for (; i < cookies.length; i++) {
				var parts = cookies[i].split('=');
				var cookie = parts.slice(1).join('=');

				if (cookie.charAt(0) === '"') {
					cookie = cookie.slice(1, -1);
				}

				try {
					var name = parts[0].replace(rdecode, decodeURIComponent);
					cookie = converter.read ?
						converter.read(cookie, name) : converter(cookie, name) ||
						cookie.replace(rdecode, decodeURIComponent);

					if (this.json) {
						try {
							cookie = JSON.parse(cookie);
						} catch (e) {}
					}

					if (key === name) {
						result = cookie;
						break;
					}

					if (!key) {
						result[name] = cookie;
					}
				} catch (e) {}
			}

			return result;
		}

		api.set = api;
		api.get = function (key) {
			return api.call(api, key);
		};
		api.getJSON = function () {
			return api.apply({
				json: true
			}, [].slice.call(arguments));
		};
		api.defaults = {};

		api.remove = function (key, attributes) {
			api(key, '', extend(attributes, {
				expires: -1
			}));
		};

		api.withConverter = init;

		return api;
	}

	return init(function () {});
}));